# CSV Plot (PyQt6)

一个基于 PyQt6 + pyqtgraph 的高性能交互式数据可视化工具，专为快速加载、浏览和分析CSV数据而设计。支持百万级数据点的流畅绘制和多曲线模式。

## 主要特性

### 数据加载与显示
- **多格式支持**: 支持CSV及兼容格式文件
- **拖拽加载**: 直接将文件拖拽到窗口中即可加载
- **智能解析**: 自动解析变量名和单位信息
- **大数据支持**: 支持百万级数据点，后台加载，进度显示
- **数据质量指示**: 
  - 🟢 绿色：变化的有效数值
  - 🟡 黄色：无变化的有效数值（常数）
  - 🔴 红色：非有效数值
- **快速浏览**: 双击变量名查看详细数值表格

### 强大的图表功能
- **拖拽式绘图**: 从变量列表拖拽变量到绘图区域即可绘图
- **多曲线模式**: 支持在同一图表中同时显示多条曲线，自动颜色分配
- **灵活布局**: 支持多子图排列（2x2网格），可自由调整布局
- **同步缩放**: 所有图表X轴自动同步，支持中键缩放
- **高性能渲染**: 
  - 智能降采样（peak模式保留峰值特征）
  - 交互期间性能优化，流畅缩放体验
  - 支持百万级数据点流畅绘制
- **精确控制**: 
  - 鼠标滚轮缩放X轴（以鼠标位置为中心）
  - 鼠标左键拖拽移动视图
  - 双击中键清除单个图表
  - 按住Ctrl/Shift在坐标轴区域滚动可缩放特定轴
- **右键菜单**: 缩放模式、跳转到数据范围、固定游标等快捷操作
- **顶部工具栏**: 标记区域、显示游标、自动调整显示区域等

### 游标与交互功能
- **十字游标**: 显示当前鼠标位置的X、Y坐标值
- **多曲线游标**: 在多曲线模式下，同时显示所有曲线在当前位置的值
- **游标固定**: 支持固定游标位置，方便查看特定点的数值
- **同步游标**: 多个图表之间的游标位置自动同步
- **交互优化**: 缩放/拖动期间自动禁用游标更新，保证流畅性

### 标记与统计分析
- **区间标记**: 在图表上标记感兴趣的数据区间（支持多个标记）
- **自动统计**: 实时计算标记区域的统计值（最小值、最大值、平均值、斜率等）
- **联动显示**: 标记信息与曲线数据保持同步
- **标记统计窗口**: 显示所有标记区域的统计信息

### 智能数据表格
- **快速访问**: 双击变量名或点击"Jump to Data"打开表格
- **冻结列功能**: 支持列冻结，方便对比查看
- **智能高亮**: 
  - 被选中的单元格：系统高亮色背景
  - 所在的行/列：浅蓝色高亮
- **散点图绘制**: 选中两列数据可快速绘制散点图
- **同步滚动**: 冻结列与非冻结列保持同步
- **位置保持**: 拖入新变量时自动保持当前滚动位置

## 快速开始

### 系统要求
- Python 3.10 或更高版本
- 支持的操作系统：Windows、macOS、Linux

### 安装步骤

1. **安装依赖**
   ```
   pip install pyqt6 pyqtgraph pandas numpy chardet ujson
   ```

2. **运行程序**
   ```
   python test_pyqt6_v5.py
   ```

## 使用指南

### 基本操作流程

1. **加载数据**
   - 点击"加载文件"按钮选择CSV文件
   - 或直接将文件拖拽到程序窗口

2. **浏览数据**
   - 在左侧变量列表中查看所有变量
   - 双击变量名查看详细数据表格
   - 观察颜色指示了解数据质量

3. **绘制图表**
   - 从变量列表拖拽变量到绘图区域
   - 使用鼠标进行缩放和平移操作
   - 右键菜单提供更多选项

4. **数据分析**
   - 使用标记功能选择感兴趣的数据区间
   - 查看统计信息了解数据特征
   - 导出分析结果

### 快捷键说明

| 操作 | 快捷键 | 说明 |
|------|--------|------|
| 清除图表 | 双击中键 | 清除当前图表 |
| 缩放视图 | 滚轮 | 缩放X轴（以鼠标位置为中心） |
| 移动视图 | 左键拖拽 | 平移视图 |
| 轴缩放 | Ctrl+滚轮 | 在坐标轴区域缩放特定轴 |
| 固定游标 | 右键菜单 | 固定游标位置 |
| 跳转数据 | 右键菜单 | 跳转到数据表格对应位置 |

## 高级功能

### 性能优化
- **智能降采样**: 自动根据可见区域降采样，百万点降至数千点渲染
- **交互期间优化**: 缩放/拖动时自动降低渲染质量，保证流畅性
- **防抖延迟**: 根据数据量和曲线数量动态调整更新延迟
- **多曲线优化**: 支持20-30条曲线同时流畅显示
- **二分查找**: 使用O(log n)算法快速定位数据点

### 多曲线模式
- **批量添加**: 支持同时拖入多个变量，自动激活多曲线模式
- **颜色管理**: 自动为每条曲线分配不同颜色
- **可见性控制**: 可单独控制每条曲线的显示/隐藏
- **游标同步**: 多曲线模式下，游标同时显示所有曲线的值

### 时间校正
- 支持时间序列数据的时间偏移校正
- 可调整时间因子和偏移量
- 实时预览校正效果

### 数据导出
- 支持将图表导出为图片
- 可导出标记区域的统计数据
- 支持数据表格的CSV导出

### 配置管理
- 自动保存窗口布局和设置
- 支持自定义绘图参数
- 配置文件自动加载

## 技术栈

- **PyQt6** - 现代化图形界面框架
- **pyqtgraph** - 高性能科学绘图库
- **pandas** - 强大的数据分析库
- **numpy** - 数值计算基础库
- **chardet** - 字符编码检测
- **ujson** - 高性能JSON处理

## 更新日志

### v0.2.0 (Alpha)
- ✨ **多曲线模式**: 支持在同一图表中同时显示多条曲线
- ⚡ **性能优化**: 支持百万级数据点流畅绘制，交互期间性能优化
- 🎯 **游标功能**: 十字游标、多曲线游标、游标固定功能
- 🎨 **界面优化**: 数值变量表颜色优化，智能高亮显示
- 🔧 **交互优化**: 拖入变量时保持滚动位置，提升用户体验
- 🚀 **算法优化**: 使用二分查找优化数据定位，性能提升

### v0.1.0 (Alpha)
- 初始版本发布
- 基础数据加载和显示功能
- 拖拽式绘图系统
- 智能数据表格
- 标记和统计功能

## 支持与反馈

如果您在使用过程中遇到问题或有改进建议，欢迎：

- 提交 Issue: [GitHub Issues](https://github.com/Melon793/csv_plot/issues)
- 参与讨论: [GitHub Discussions](https://github.com/Melon793/csv_plot/discussions)
- 给项目点赞: [GitHub Star](https://github.com/Melon793/csv_plot)

## 许可证

本项目采用开源许可证，供学习与研究使用。欢迎自由修改和扩展。

---

**如果这个项目对您有帮助，请给我们一个 Star！**
