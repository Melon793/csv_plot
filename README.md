# CSV Plot Viewer (PyQt6)

一个基于 **PyQt6 + pyqtgraph** 的交互式数据可视化工具，适合快速加载 CSV 数据、浏览曲线、分析对比、做标记统计等操作。

## ✨ 功能特性

- **数据加载与显示**
  - 打开 CSV 或兼容格式文件
  - 自动解析变量名和单位并显示在列表中
  - 分析各个变量名数值内：
    - 变化的有效数值 -> 绿色
    - 无变化的有效数值 -> 黄色
    - 非有效数值 -> 红色
  
- **图表功能**
  - 支持拖拽式布局，曲线子图可以灵活排列
  - 支持x轴的缩放、平移
  - 右键菜单：缩放模式、跳转到数据范围等
  - 顶部菜单：标记区域、显示游标、自动调整显示区域...

- **标记与统计**
  - 可在图表上标记区间
  - 支持自动计算标记区域的统计值
  - 标记信息与曲线联动

- **数据表格**
  - 调用：在变量选择窗口双击变量名/在曲线上点击“jump to data”
  - 支持冻结列，方便对比查看
  - 冻结列与非冻结列保持同步滚动和对齐
  - 行高自动统一，避免长表格滚动错位


## 🚀 快速上手指南

### 1. 安装依赖
请确保已安装 Python 3.10+，然后安装依赖：
```bash
pip install pyqt6 pyqtgraph pandas numpy
```

### 2. 启动程序
运行：
```bash
python test_pyqt6_v5.py
```

程序会弹出主界面。

### 3. 加载数据
- 点击 **菜单/按钮** 打开 CSV 文件，或者直接将文件拖动到窗口中
- 变量名支持“名称”和”单位“双筛选
- 双击变量列表中的变量名，具体数值会显示在表格中
- 冻结列（如时间戳）在滚动时保持固定
- 

### 5. 图表操作
- 拖动变量名：
    - 拖动变量名到指定绘图区域可以直接绘图
- 鼠标滚轮：
    - 在绘图区域滚动滚轮 -> x轴缩放; 
    - 坐标轴轴滚动滚轮 -> 对应坐标轴缩放
- 鼠标拖拽：平移
- 双击鼠标中键：清除当前绘图
- 框选缩放区域：按住shift，通过鼠标框选
- 右键菜单：
  - **Jump to data**：自动打开数据查看窗口
  - **标记区域**：高亮区间并计算统计值
  - **缩放/平移模式**：切换鼠标模式

## ⚙️ 常见问题

### 表格冻结列和非冻结列不同步？
已通过 **统一行高** 和 **同步滚动条** 解决。如果仍遇到末端误差，可在 `DataTableDialog` 中调大默认行高，例如：
```python
fm = QFontMetrics(self.main_view.font())
safe_height = fm.height() + 10
```

### 界面字体大小不合适？
可以修改 `QFont` 设置，或在系统设置中调整缩放比例。

---

## 📌 技术栈

- [PyQt6](https://pypi.org/project/PyQt6/) - 图形界面
- [pyqtgraph](http://www.pyqtgraph.org/) - 高性能绘图
- [pandas](https://pandas.pydata.org/) - 数据处理
- [numpy](https://numpy.org/) - 数值计算

---

## 📄 License
本工具供学习与研究使用，欢迎自由修改和扩展。
